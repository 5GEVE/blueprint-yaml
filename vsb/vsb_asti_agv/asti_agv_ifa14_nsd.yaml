---
nsd:
  nsdIdentifier: '6aa36f0d-00f3-47a1-9c7f-2d38c7146127' #ASTI AGV NS
  designer: UC3M
  version: '1.0'
  nsdName: 5G EVE ASTI AGV NS 
  nsdInvariantId: ASTI_NS_1.0
  vnfdId: 
  - TrafficSrc_vnfd
  - Delay_vnfd
  - MasterPLC_vnfd
  - TrafficSink_vnfd
  sapd:
  - cpdId: asti_data
    layerProtocol: IPV4
    description: SAP to connect the AGVs to the network service
    addressData:
    - addressType: IP_ADDRESS
      iPAddressAssignment: false
      floatingIpActivated: false
      management: false
      iPAddressType: IPv4
      numberOfIpAddress: 1
    sapAddressAssignment: false
    nsVirtualLinkDescId: asti_data_VL
  - cpdId: delay_mgmt
    layerProtocol: IPV4
    description: SAP to manage delay component VNF
    addressData:
    - addressType: IP_ADDRESS
      iPAddressAssignment: false
      floatingIpActivated: false
      management: false
      iPAddressType: IPv4
      numberOfIpAddress: 1
    sapAddressAssignment: false
    nsVirtualLinkDescId: delay_mgmt_VL
  - cpdId: src_mgmt
    layerProtocol: IPV4
    description: SAP to manage traffic source VNF
    addressData:
    - addressType: IP_ADDRESS
      iPAddressAssignment: false
      floatingIpActivated: false
      management: false
      iPAddressType: IPv4
      numberOfIpAddress: 1
    sapAddressAssignment: false
    nsVirtualLinkDescId: src_mgmt_VL
  - cpdId: mplc_mgmt
    layerProtocol: IPV4
    description: SAP to manage traffic source VNF
    addressData:
    - addressType: IP_ADDRESS
      iPAddressAssignment: false
      floatingIpActivated: false
      management: false
      iPAddressType: IPv4
      numberOfIpAddress: 1
    sapAddressAssignment: false
    nsVirtualLinkDescId: mplc_mgmt_VL
  - cpdId: sink_mgmt
    layerProtocol: IPV4
    description: SAP to manage traffic sink VNF
    addressData:
    - addressType: IP_ADDRESS
      iPAddressAssignment: false
      floatingIpActivated: false
      management: false
      iPAddressType: IPv4
      numberOfIpAddress: 1
    sapAddressAssignment: false
    nsVirtualLinkDescId: sink_mgmt_VL

  virtualLinkDesc:
  - virtualLinkDescId: asti_data_VL
    virtualLinkDescProvider: UC3M
    virtuaLinkDescVersion: '1.0'
    connectivityType:
      layerProtocol: IPV4
      flowPattern: 
    virtualLinkDf: 
    - flavourId: asti_data_VL_df
      qos:
        latency: 0
        packetDelayVariation: 0
        packetLossRatio: 0
        priority: 0
      serviceAvaibilityLevel: LEVEL_1
      bitrateRequirements:
        root: 1
        leaf: 1
    description: Data network to control and manage AGVs
  - virtualLinkDescId: delay_mgmt_VL
    virtualLinkDescProvider: UC3M
    virtuaLinkDescVersion: '1.0'
    connectivityType:
      layerProtocol: IPV4
      flowPattern: 
    virtualLinkDf: 
    - flavourId: delay_mgmt_VL_df
      qos:
        latency: 0
        packetDelayVariation: 0
        packetLossRatio: 0
        priority: 0
      serviceAvaibilityLevel: LEVEL_1
      bitrateRequirements:
        root: 1
        leaf: 1
    description: Management network for the Delay VNF component
  - virtualLinkDescId: src_mgmt_VL
    virtualLinkDescProvider: UC3M
    virtuaLinkDescVersion: '1.0'
    connectivityType:
      layerProtocol: IPV4
      flowPattern: 
    virtualLinkDf: 
    - flavourId: src_mgmt_VL_df
      qos:
        latency: 0
        packetDelayVariation: 0
        packetLossRatio: 0
        priority: 0
      serviceAvaibilityLevel: LEVEL_1
      bitrateRequirements:
        root: 1
        leaf: 1
    description: Management network for the traffic source VNF component
  - virtualLinkDescId: mplc_mgmt_VL
    virtualLinkDescProvider: UC3M
    virtuaLinkDescVersion: '1.0'
    connectivityType:
      layerProtocol: IPV4
      flowPattern: 
    virtualLinkDf: 
    - flavourId: mplc_mgmt_VL_df
      qos:
        latency: 0
        packetDelayVariation: 0
        packetLossRatio: 0
        priority: 0
      serviceAvaibilityLevel: LEVEL_1
      bitrateRequirements:
        root: 1
        leaf: 1
    description: Management network for the Master PLC VNF component
  - virtualLinkDescId: sink_mgmt_VL
    virtualLinkDescProvider: UC3M
    virtuaLinkDescVersion: '1.0'
    connectivityType:
      layerProtocol: IPV4
      flowPattern: 
    virtualLinkDf: 
    - flavourId: sink_mgmt_VL_df
      qos:
        latency: 0
        packetDelayVariation: 0
        packetLossRatio: 0
        priority: 0
      serviceAvaibilityLevel: LEVEL_1
      bitrateRequirements:
        root: 1
        leaf: 1
    description: Management network for the traffic sink VNF component
  - virtualLinkDescId: data1_VL
    virtualLinkDescProvider: UC3M
    virtuaLinkDescVersion: '1.0'
    connectivityType:
      layerProtocol: IPV4
      flowPattern: 
    virtualLinkDf:
    - flavourId: data1_VL_df
      qos:
        latency: 0
        packetDelayVariation: 0
        packetLossRatio: 0
        priority: 0
      serviceAvaibilityLevel: LEVEL_1
      bitrateRequirements: 
        root: 2
        leaf: 1
    description: Data network to connect the Traffic source VNF to the Delay VNF
  - virtualLinkDescId: data2_VL
    virtualLinkDescProvider: UC3M
    virtuaLinkDescVersion: '1.0'
    connectivityType:
      layerProtocol: IPV4
      flowPattern: 
    virtualLinkDf:
    - flavourId: data2_VL_df
      qos:
        latency: 0
        packetDelayVariation: 0
        packetLossRatio: 0
        priority: 0
      serviceAvaibilityLevel: LEVEL_1
      bitrateRequirements: 
        root: 2
        leaf: 1
    description: Data network to connect the Delay VNF to the MasterPLC
  - virtualLinkDescId: data3_VL
    virtualLinkDescProvider: UC3M
    virtuaLinkDescVersion: '1.0'
    connectivityType:
      layerProtocol: IPV4
      flowPattern: 
    virtualLinkDf:
    - flavourId: data3_VL_df
      qos:
        latency: 0
        packetDelayVariation: 0
        packetLossRatio: 0
        priority: 0
      serviceAvaibilityLevel: LEVEL_1
      bitrateRequirements: 
        root: 2
        leaf: 1
    description: Data network to connect the Delay VNF to the Traffic Sink
  
  nsDf:
  - nsDfId:  'a95f97e5-f6b2-43e0-840c-ab48612573f8' #ASTI_NS_small_df
    flavourKey: ASTI_small_fl
    vnfProfile:
    - vnfProfileId: MasterPLC_profile
      vnfdId: MasterPLC_vnfd
      flavourId: MasterPLC_df
      instantiationLevel: MasterPLC_IL
      minNumberOfInstances: 1
      maxNumberOfInstances: 2
      nsVirtualLinkConnectivity:
      - virtualLinkProfileId: data2_profile
        cpdId:
        - data2_Cp
      - virtualLinkProfileId: mplc_mgmt_VL_profile
        cpdId:
        - mplc_mgmt
    - vnfProfileId: TrafficSrc_profile
      vnfdId: TrafficSrc_vnfd
      flavourId: TrafficSrc_df
      instantiationLevel: TrafficSrc_IL
      minNumberOfInstances: 1
      maxNumberOfInstances: 1
      nsVirtualLinkConnectivity:
      - virtualLinkProfileId: data1_profile
        cpdId:
        - data1_Cp
      - virtualLinkProfileId: src_mgmt_VL_profile
        cpdId:
        - src_mgmt
    - vnfProfileId: TrafficSink_profile
      vnfdId: TrafficSink_vnfd
      flavourId: TrafficSink_df
      instantiationLevel: TrafficSink_IL
      minNumberOfInstances: 1
      maxNumberOfInstances: 1
      nsVirtualLinkConnectivity:
      - virtualLinkProfileId: data3_profile
        cpdId:
        - data3_Cp
      - virtualLinkProfileId: sink_mgmt_VL_profile
        cpdId:
        - sink_mgmt
    
    - vnfProfileId: Delay_profile
      vnfdId: Delay_vnfd
      flavourId: Delay_df
      instantiationLevel: Delay_IL
      minNumberOfInstances: 1
      maxNumberOfInstances: 1
      nsVirtualLinkConnectivity:
      - virtualLinkProfileId: data1_profile
        cpdId:
        - data1_Cp
      - virtualLinkProfileId: data2_profile
        cpdId:
        - data2_Cp
      - virtualLinkProfileId: data3_profile
        cpdId:
        - data3_Cp
      - virtualLinkProfileId: delay_mgmt_VL_profile
        cpdId:
        - delay_mgmt
      - virtualLinkProfileId: asti_data_VL_profile
        cpdId:
        - asti_data
   
    virtualLinkProfile:
    - virtualLinkProfileId: asti_data_VL_profile
      virtualLinkDescId: asti_data_VL
      flavourId:  asti_data_VL_df
      maxBitrateRequirements:
        root: '1'
        leaf: '1'
      minBitrateRequirements:
        root: '1'
        leaf: '1'
    - virtualLinkProfileId: data1_profile
      virtualLinkDescId: data1_VL
      flavourId: data1_VL_df
      maxBitrateRequirements:
        root: '2'
        leaf: '1'
      minBitrateRequirements:
        root: '2'
        leaf: '1'
    - virtualLinkProfileId: data2_profile
      virtualLinkDescId: data2_VL
      flavourId: data2_VL_df
      maxBitrateRequirements:
        root: '2'
        leaf: '1'
      minBitrateRequirements:
        root: '2'
        leaf: '1'
    - virtualLinkProfileId: data3_profile
      virtualLinkDescId: data3_VL
      flavourId: data3_VL_df
      maxBitrateRequirements:
        root: '2'
        leaf: '1'
      minBitrateRequirements:
        root: '2'
        leaf: '1'
    - virtualLinkProfileId: delay_mgmt_VL_profile
      virtualLinkDescId: delay_mgmt_VL
      flavourId: delay_mgmt_VL_df
      maxBitrateRequirements:
        root: '2'
        leaf: '1'
      minBitrateRequirements:
        root: '2'
        leaf: '1'
    - virtualLinkProfileId: src_mgmt_VL_profile
      virtualLinkDescId: src_mgmt_VL
      flavourId: src_mgmt_VL_df
      maxBitrateRequirements:
        root: '2'
        leaf: '1'
      minBitrateRequirements:
        root: '2'
        leaf: '1'
    - virtualLinkProfileId: mplc_mgmt_VL_profile
      virtualLinkDescId: mplc_mgmt_VL
      flavourId: mplc_mgmt_VL_df
      maxBitrateRequirements:
        root: '2'
        leaf: '1'
      minBitrateRequirements:
        root: '2'
        leaf: '1'
    - virtualLinkProfileId: sink_mgmt_VL_profile
      virtualLinkDescId: sink_mgmt_VL
      flavourId: sink_mgmt_VL_df
      maxBitrateRequirements:
        root: '2'
        leaf: '1'
      minBitrateRequirements:
        root: '2'
        leaf: '1'
    nsInstantiationLevel:
    - nsLevelId: asti_ns_il_small
      description: Default instantiation level for the ASTI AGV Network service
      vnfToLevelMapping:
      - vnfProfileId: MasterPLC_profile
        numberOfInstances: 1
      - vnfProfileId: TrafficSrc_profile
        numberOfInstances: 1
      - vnfProfileId: TrafficSink_profile
        numberOfInstances: 1
      - vnfProfileId: Delay_profile
        numberOfInstances: 1
      virtualLinkToLevelMapping:
      - virtualLinkProfileId: data1_profile
        bitRateRequirements:
          root: '2'
          leaf: '1'
      - virtualLinkProfileId: data2_profile
        bitRateRequirements:
          root: '2'
          leaf: '1'
      - virtualLinkProfileId: data3_profile
        bitRateRequirements:
          root: '2'
          leaf: '1'
      - virtualLinkProfileId: asti_data_VL_profile
        bitRateRequirements:
          root: '1'
          leaf: '1' 
      - virtualLinkProfileId: delay_mgmt_VL_profile
        bitRateRequirements:
          root: '2'
          leaf: '1'
      - virtualLinkProfileId: src_mgmt_VL_profile
        bitRateRequirements:
          root: '2'
          leaf: '1'
      - virtualLinkProfileId: mplc_mgmt_VL_profile
        bitRateRequirements:
          root: '2'
          leaf: '1'
      - virtualLinkProfileId: sink_mgmt_VL_profile
        bitRateRequirements:
          root: '2'
          leaf: '1'    
    - nsLevelId: asti_ns_il_medium
      description: ASTI NS Instantiation level to support 2 AGVs
      vnfToLevelMapping:
      - vnfProfileId: MasterPLC_profile
        numberOfInstances: 2
      - vnfProfileId: TrafficSrc_profile
        numberOfInstances: 1
      - vnfProfileId: TrafficSink_profile
        numberOfInstances: 1
      - vnfProfileId: Delay_profile
        numberOfInstances: 1
      virtualLinkToLevelMapping:
      - virtualLinkProfileId: data1_profile
        bitRateRequirements:
          root: '2'
          leaf: '1'
      - virtualLinkProfileId: data2_profile
        bitRateRequirements:
          root: '2'
          leaf: '1'
      - virtualLinkProfileId: data3_profile
        bitRateRequirements:
          root: '2'
          leaf: '1'
      - virtualLinkProfileId: asti_data_VL_profile
        bitRateRequirements:
          root: '1'
          leaf: '1' 
      - virtualLinkProfileId: delay_mgmt_VL_profile
        bitRateRequirements:
          root: '2'
          leaf: '1'
      - virtualLinkProfileId: src_mgmt_VL_profile
        bitRateRequirements:
          root: '2'
          leaf: '1'
      - virtualLinkProfileId: mplc_mgmt_VL_profile
        bitRateRequirements:
          root: '2'
          leaf: '1'
      - virtualLinkProfileId: sink_mgmt_VL_profile
        bitRateRequirements:
          root: '2'
          leaf: '1' 
       
    defaultNsInstantiationLevelId: asti_ns_il_small
    dependencies:
    - primaryId: MasterPLC_profile
    - secondaryId:
      - TrafficSrc_profile
      - TrafficSink_profile
      - Delay_profile
  security:
    signature: ASTI_NSD_SIGNATURE
    algorithm: ASTI_NSD_ALGORITHM
    certificate: ASTI_NSD_CERTIFICATE
